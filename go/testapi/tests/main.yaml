---
version: 1
variables:
  api_url: https://jsonplaceholder.typicode.com
transactions:
  - id: transaction-one
    variables:
      api_url: https://jsonplaceholder.typicode.com
      title: delectus aut autem
    steps:
      - id: hello-endpoint-one
        request:
          method: GET
          endpoint: "{{ var.api_url }}/todos/1"
          skip_ssl_verify: true

      - id: hello-endpoint-two
        request:
          method: GET
          endpoint: "{{ var.api_url }}/todos/1"
          skip_ssl_verify: true
        response:
          code: 200
          body:
            type: "plaintext"
            content: |-
              {
                "userId": 1,
                "id": 1,
                "title": "{{var.title}}",
                "completed": false
              }
        export:
          auth_cookie: response.headers.X-APIDAUTH
          first_address: response.body.addresses[0].first_line

      - id: hello-endpoint-test-get-1
        request:
          method: GET
          endpoint: "{{ var.api_url }}/posts/1"
        response:
          code: 200
          body:
            type: "json"
            content: |
              {
                "userId": 1,
                "id": 1,
                "title": "",
                "body": ""
              }
            exact: false
